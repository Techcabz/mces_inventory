{% extends "admin/template/admin_layout.html" %} {% block admin_content %}

<ul class="nav nav-tabs" id="myTab" role="tablist">
  <li class="nav-item" role="presentation">
    <button class="nav-link active" id="pending-tab" data-bs-toggle="tab" data-bs-target="#pending" type="button"
      role="tab" aria-controls="pending" aria-selected="true">
      PENDING
    </button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="approved-tab" data-bs-toggle="tab" data-bs-target="#approved" type="button" role="tab"
      aria-controls="approved" aria-selected="false">
      APPROVED
    </button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="canceled-tab" data-bs-toggle="tab" data-bs-target="#canceled" type="button" role="tab"
      aria-controls="canceled" aria-selected="false">
      HISTORY / CANCELED
    </button>
  </li>
</ul>

<div class="tab-content" id="myTabContent">
  <div class="tab-pane fade show active" id="pending" role="tabpanel" aria-labelledby="pending-tab">
    <div class="card">
      <div class="card-body p-3">
        <h4 class="card-title">
          <div class="d-flex justify-content-between align-items-center">
            <h5 class="m-0 font-weight-bold text-primary">
              PENDING {{ request.endpoint.split('.')[-1] | upper }} LIST
            </h5>
            <button type="button" class="btn bg-gradient-success d-none">
              <i class="fa fa-plus-square"></i>&nbsp;Add new {{
              request.endpoint.split('.')[-1] | upper }}
            </button>
          </div>
        </h4>
        <div class="table-responsived">
          <table id="datatable" class="table table-borderless">
            <thead class="bg-gradient-success text-white">
              <tr>
                <th>#</th>

                <th>Reference</th>
                <th>Item</th>
                <th>Users</th>
                <th>Qty</th>
                <th>Start Date</th>
                <th>End Date</th>
                <th class="d-none">Status</th>
                <th style="width: 160px">Action</th>
              </tr>
            </thead>
            <tbody>
              {% for borrowing in borrowings %}
              {% if borrowing.status == 'pending' %}
              <tr>
                <td>{{ loop.index }}</td>

                <td> <span class="border p-1 border-dark font-weight-bold">{{ borrowing.reference_number }}</span></td>
                <td>{{ borrowing.inventory_item.title }}</td>
                <td>{{ borrowing.user.fullname }}</td>
                <td>{{ borrowing.quantity }}</td>
                <td>{{ borrowing.start_date.strftime('%Y-%m-%d') }}</td>
                <td>
                  {{ borrowing.end_date.strftime('%Y-%m-%d') if borrowing.end_date
                  else 'N/A' }}
                </td>
                <td class="d-none">
                  <span
                    class=" badge {% if borrowing.status == 'pending' %} bg-warning {% elif borrowing.status == 'approved' %} bg-success {% elif borrowing.status == 'cancel' %} bg-danger {% endif %}">
                    {{ borrowing.status | capitalize }}
                  </span>
                </td>
                <td>
                  <div class="d-flex justify-content-center align-items-center gap-2 mt-1">
                    <span class="badge bg-success custom-cursor bApproved" data-id="{{ borrowing.id }}">APPROVED</span>
                    <span class="badge bg-danger custom-cursor bDisapproved"
                      data-id="{{ borrowing.id }}">DISAPPROVED</span>
                  </div>
                </td>
              </tr>
              {% endif %}
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane fade show " id="approved" role="tabpanel" aria-labelledby="approved-tab">
    <div class="card">
      <div class="card-body p-3">
        <h4 class="card-title">
          <div class="d-flex justify-content-between align-items-center">
            <h5 class="m-0 font-weight-bold text-primary">
              APPROVED {{ request.endpoint.split('.')[-1] | upper }} LIST
            </h5>
            <button type="button" class="btn bg-gradient-success d-none">
              <i class="fa fa-plus-square"></i>&nbsp;Add new {{
              request.endpoint.split('.')[-1] | upper }}
            </button>
          </div>
        </h4>
        <div class="table-responsived">
          <table id="datatable1" class="table table-borderless w-100">
            <thead class="bg-gradient-success text-white">
              <tr>
                <th>#</th>

                <th>Reference</th>
                <th>Item</th>
                <th>Users</th>
                <th>Qty</th>
                <th>Start Date</th>
                <th>End Date</th>
                <th class="d-none">Status</th>
                <th style="width: 160px">Action</th>
              </tr>
            </thead>
            <tbody>
              {% for borrowing in borrowings %}
              {% if borrowing.status == 'pending' %}
              <tr>
                <td>{{ loop.index }}</td>

                <td> <span class="border p-1 border-dark font-weight-bold">{{ borrowing.reference_number }}</span></td>
                <td>{{ borrowing.inventory_item.title }}</td>
                <td>{{ borrowing.user.fullname }}</td>
                <td>{{ borrowing.quantity }}</td>
                <td>{{ borrowing.start_date.strftime('%Y-%m-%d') }}</td>
                <td>
                  {{ borrowing.end_date.strftime('%Y-%m-%d') if borrowing.end_date
                  else 'N/A' }}
                </td>
                <td class="d-none">
                  <span
                    class=" badge {% if borrowing.status == 'pending' %} bg-warning {% elif borrowing.status == 'approved' %} bg-success {% elif borrowing.status == 'cancel' %} bg-danger {% endif %}">
                    {{ borrowing.status | capitalize }}
                  </span>
                </td>
                <td>
                  <div class="d-flex justify-content-center align-items-center gap-2 mt-1">
                    <span class="badge bg-success custom-cursor bApproved" data-id="{{ borrowing.id }}">APPROVED</span>
                    <span class="badge bg-danger custom-cursor bDisapproved"
                      data-id="{{ borrowing.id }}">DISAPPROVED</span>
                  </div>
                </td>
              </tr>
              {% endif %}
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane fade show " id="canceled" role="tabpanel" aria-labelledby="canceled-tab">
    <div class="card">
      <div class="card-body p-3">
        <h4 class="card-title">
          <div class="d-flex justify-content-between align-items-center">
            <h5 class="m-0 font-weight-bold text-primary">
              HISTORY / CANCELED {{ request.endpoint.split('.')[-1] | upper }} LIST
            </h5>
            <button type="button" class="btn bg-gradient-success d-none">
              <i class="fa fa-plus-square"></i>&nbsp;Add new {{
              request.endpoint.split('.')[-1] | upper }}
            </button>
          </div>
        </h4>
        <div class="table-responsived">
          <table id="datatable2" class="table table-borderless w-100">
            <thead class="bg-gradient-success text-white">
              <tr>
                <th>#</th>

                <th>Reference</th>
                <th>Item</th>
                <th>Users</th>
                <th>Qty</th>
                <th>Start Date</th>
                <th>End Date</th>
                <th class="d-none">Status</th>
                <th style="width: 160px">Action</th>
              </tr>
            </thead>
            <tbody>
              {% for borrowing in borrowings %}
              {% if borrowing.status == 'pending' %}
              <tr>
                <td>{{ loop.index }}</td>

                <td> <span class="border p-1 border-dark font-weight-bold">{{ borrowing.reference_number }}</span></td>
                <td>{{ borrowing.inventory_item.title }}</td>
                <td>{{ borrowing.user.fullname }}</td>
                <td>{{ borrowing.quantity }}</td>
                <td>{{ borrowing.start_date.strftime('%Y-%m-%d') }}</td>
                <td>
                  {{ borrowing.end_date.strftime('%Y-%m-%d') if borrowing.end_date
                  else 'N/A' }}
                </td>
                <td class="d-none">
                  <span
                    class=" badge {% if borrowing.status == 'pending' %} bg-warning {% elif borrowing.status == 'approved' %} bg-success {% elif borrowing.status == 'cancel' %} bg-danger {% endif %}">
                    {{ borrowing.status | capitalize }}
                  </span>
                </td>
                <td>
                  <div class="d-flex justify-content-center align-items-center gap-2 mt-1">
                    <span class="badge bg-success custom-cursor bApproved" data-id="{{ borrowing.id }}">APPROVED</span>
                    <span class="badge bg-danger custom-cursor bDisapproved"
                      data-id="{{ borrowing.id }}">DISAPPROVED</span>
                  </div>
                </td>
              </tr>
              {% endif %}
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>

{% endblock %}